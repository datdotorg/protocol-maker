const b = require('b')
const c = require('c')
const protocol_maker = require('../..')
const my_protocol = require('_my-protocol')

const sdk = () => api
const { contacts } = protocol_maker({ protocol: my_protocol(sdk) })
const api = { log: sdk.log }

var count = 0

module.exports = function make (opts, wire) {
  const node = protocol_maker({
    protocol, wires: { parent: wire, factory: contacts.add(sdk.id + count++) }
  })

  const _opts = {}
  b(_opts, node.contacts.add('b'))
  c(_opts, node.contacts.add('c'))

  return
  function protocol (msg) {
    api.log('[instance]', msg)
  }
}
